#!/usr/bin/env python3
# -*- coding: utf-8 -*-
# Author: DBQ(Du Baoqiang)

'''
import json

inp_str = "[11,22,33,44,]"

input_list = json.loads(inp_str)

inp_str = '{"k1":1,"k2":"v2"}'

inp_dict = json.loads(inp_str)


import json
inp_str = "[11,22,33,44]"
inp_list = json.loads(inp_str) # 根据字符串书写格式，将字符串自动转换成 列表类型
print(inp_list)


inp_str = ' {"k1":123, "k2": "wupeiqi"} '  # 正确的输入      切记，内部必须是 双引号 ！！！
#inp_str = " {'k1':123, 'k2': 'wupeiqi'}"   # 错误的输入
inp_dict = json.loads(inp_str) # 根据字符串书写格式，将字符串自动转换成 字典类型
print(inp_dict)
print(type(inp_dict))
'''
#
# import json
#
# input_str = " [1,2,3,4,5] "
# input_list = json.loads(input_str)
# print(input_list)
#
# input_str = '{"Name":"Daniel","Age":18}'
# input_dict =json.loads(input_str)
# print(input_dict)

#user_input = input('请输入一个backed:').strip()

import time
import linecache
# user_input=input('请输入一个backend:').strip()
#
# f = open('./conf/haproxy.cfg','r')
# #print(linecache.getlines('./conf/haproxy.cfg'))[]
# #f.readlines()
# print(f.tell())
# result = f.readlines()
# print(type(result))
# print(result)
# for line in result:
#     print(line.strip())
# print(result.find('backend www.oldboy.org'))
# result.

#print(f.__next__())

#f.s
#print(f.tell())
# for line in f:
#     if line.startswith('backend'):
#         if user_input in line:
#             print(line)
    #if user_input in backed.startswith(user_input):
        #print(line.strip())
#        print(backed)
        #print(f.tell())
        #print(line.strip())
        #time.sleep(0.2)
    #if user_input == f.readlines():
        #print(f.tell())
        #break
# else:
#     #print('没找到')
#     pass

#f.newlines
#
# user_input=input('输入你要查找的backend:').strip()
#
#
# backend_title = 'backend %s' %user_input
# with open('conf/haproxy.cfg') as f:
#     l1 = []
#     flag = False
#     for line in f:
#         line = line.strip()
#         if line == backend_title:
#             flag = True
#             # break
#             continue
#         if flag and line.startswith('backend'):
#             flag = False
#             break
#         if flag and line:
#             l1.append(line)
#     count = len(l1)
#     for i in range(0,count):
#         print(l1[i])
#     # print(len(l1))
#     # print(l1[0])
#     #for i in len(l1):
#     #    print(l1[i])
#     # print(l1)
#
#     # print(l1.index(user_input))
#     #for line in f:
#         #if user_input in line and line.startswith('backend'):
#             #l1.append(line)
#             #print(line)
#             #print(f.__next__().strip())
#             #if not line.startswith('backend'):
#             #    print(f.__next__().strip())
#             #print(line.endswith(user_input))
#             #if line.startswith('backend'):break
#             #break
#     # print(l1)
#     # print(f.tell())
#     # for line1 in f:
#     #     print(line1)
#     #     if line1.startswith('backend'):
#     #         break
#     ## print(type(f.readlines()))
#
#
# print(time.strftime('%Y%m%d%H%M%S',time.localtime()) )
# d1 = {"backend": "test.oldboy.org","record":{"server": "100.1.7.9","weight": 20,"maxconn": 30}}
#
# print(d1['backend'])
# print(d1['record'])
# print(d1['record']['server'])
# print(d1['record']['weight'])
# print(d1['record']['maxconn'])
#
#
# import json
#
# CONF = './conf/haproxy.cfg'
# # user_input_server = input('''格式:
# #             {"backend": "test.oldboy.org","record":{"server": "100.1.7.9","weight": 20,"maxconn": 30}}
# #             请输入要增加的Server记录:''').strip()
# user_input_server = json.loads(user_input_server)
#
#
# backend_title = 'backend %s' % user_input_server['backend']
# record_IP = user_input_server['record']['server']
# record_weight = str(user_input_server['record']['weight'])
# record_maxconn = str(user_input_server['record']['maxconn'])
# #record_list = 'server' + ' ' + record_IP + ' ' + record_IP + ' ' + 'weight' + ' ' + record_weight + ' ' + 'maxconn' + ' ' + record_maxconn
# record = 'server' + ' ' + record_IP + ' ' + record_IP + ' ' + 'weight' + ' ' + record_weight + ' ' + 'maxconn' + ' ' + record_maxconn
# #server 100.1.7.9 100.1.7.9 weight 20 maxconn 3000
# flag = False
# server_list = []
# backend_list = {}
#
# with open(CONF,'r') as readonly_f , open('./conf/haproxy.cfg.new','w+') as writable_f:
#     for line in readonly_f:
#         #writable_f.write(line)
#         if line.strip() != backend_title:
#             writable_f.write(line)
#             flag = True
#             continue
#         if line.startswith('backend') and flag:
#             flag = False
#             #break
#         if flag and line:
#             print('Line 是啥: %s' %line)
#             server_list.append(line.strip())
#             backend_list[backend_title]=server_list
#             print(server_list)
#             flag = False
#             #break
#
#         for key in backend_list.keys():
#             if backend_title == key:
#                 backend_list[key].append(record)
#                 flag = True
#
#         else:
#             writable_f.write(backend_title + '\n')
#             writable_f.write('\t'*2 + record + '\n')
#             break
#         if flag:
#             for i in backend_list[line]:
#                 writable_f.write('\t' + i + '\n')
#
#         #else:
#         #    writable_f.write('\t' + record + '\n')
#         #    break
# #print(user_input_server['backend'])
# #print(server_list)
# #print(backend_list)
#
#
#
# print(backend_list)


# with open('./conf/haproxy.cfg','r') as f:
#     for line in f:
#         print(line)


l1 = [ 'server 100.1.7.9 100.1.7.9 weight 20 maxconn 30','','','']
result = l1.count('')
print('server' in l1)
print(len(l1))


for i in range(l1.count('')):
    l1.remove('')

result = l1.count('')
print('server' in l1)
print(len(l1))
print(result)
print(l1)