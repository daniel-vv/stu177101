Author: DBQ(Du Baoqiang)
Blog: http://www.cnblogs.com/dubq/p/5654151.html
Github: https://github.com/daniel-vv/stu177101


作业：开发一个支持多用户在线的FTP程序

要求：
    1. 用户加密认证
    2. 允许同时多用户登录
    3. 每个用户有自己的家目录 ，且只能访问自己的家目录
    4. 对用户进行磁盘配额，每个用户的可用空间不同
    5. 允许用户在ftp server上随意切换目录
    6. 允许用户查看当前目录下文件
    7. 允许上传和下载文件，保证文件一致性
    8. 文件传输过程中显示进度条
    9. 附加功能：支持文件的断点续传

文件描述:

运行说明:
    本程序在 Mac下的PyCharm(5.0.3 Pro),以及Mac 终端(Python3.5解释器)中测试通过.
    执行方式: python3 /path/to/dirname/bin/server.py        或者   进入bin目录./server.py
             python3 /path/to/dirname/bin/client.py        或者   进入bin目录./client.py


             或者在Pycharm中运行各自运行三个主程序.

文件说明:
    |____ftp               #程序主目录
    | |____bin             #运行程序目录
    | | |____client.py     #客户端运行程序
    | | |____server.py     #服务器运行目录
    | |____config          #配置文件目录
    | | |____server.conf   #主配置文件,存放服务器\客户端连接端口,以及用户配额信息, 供用户使用,修改后需要重启服务器程序. 使用ini格式
    | | |____settings.py   #配置文件,供程序使用,存放各种变量
    | |____db              #数据存放目录
    | | |____home          #用户家目录,存放各个用户家目录文件
    | | | |____jerry       #用户家目录
    | | | |____tom         #用户家目录
    | | |____userdb.json   #用户数据文件,存放密码,以及用户使用的信息
    | |____lib             #程序库目录
    | | |____log.py        #日志接口文件
    | | |____modules.py    #主接口文件
    | |____logs            #日志目录
    | | |____access.log    #日志文件
    | |____Readme          #自述文件
    | |____ftp流控图.pdf    #流控图, 思维导图


账户说明:
    本程序默认提供三个测试用户:
    账号: tom     密码: 123
    账号: jerry   密码: 123
    账号: sam     密码: 123

关于磁盘配额:
    程序支持单个用户的磁盘配额, 在配置文件 server.conf中修改, 格式为ini, 如下:
    [tom]   #用户名
    quota = 300   #单位为MB,暂不支持其他单位! 另外,不能带单位!

    如果没有单独指定配额, 将加载系统默认的 default 选项, 即默认: 400M


支持help:
    语法: help [command]

支持的命令:
    cd  改变服务器目录
    ls  列出服务器目录文件
    pwd 列出当前在服务器的目录
    get 下载
    put 上传
    lcd 改变本地目录
    lpwd 列出当前本地目录
    ldir 列出当前本地目录下文件
    ...
    ...

    PS: 详见help

支持断点续传:
    上传时,判断用户已上传文件是否存在,如存在,比对大小,如果接受到的文件已经和要发送的大小一致,那么返回用于文件已存在. 否则,发送已接受到的大小
    并已追加的形式打开文件, 置已接收到的数据大小为已经收到的大小,等待用户发送
    客户端收到续传的代码后,提示用户输入确认续传与否, 而后针对输入开始续传, 打开文件, 将文件指针指向服务器已收到的大小位置,开始发送.
    最后通过文件校验验证文件完整性.

    下载同理...





